{"$policy":"Let","pattern":{"$policy":"Lookup","name":"me"},"term":"did:example:from","in":{"$policy":"Let","pattern":{"$policy":"Lookup","name":"ping"},"term":{"$policy":"Function","pattern":{"$policy":"Lookup","name":"receiver"},"term":{"$policy":"Let","pattern":{"$policy":"Lookup","name":"message"},"term":{"Type":"https://didcomm.org/trust-ping/2.0/ping","Id":"send-id","From":{"$policy":"Lookup","name":"me"},"Body":{"ResponseRequested":true}},"in":{"$policy":"Sequence","terms":[{"$policy":"Send","message":{"$policy":"Lookup","name":"message"},"channel":{"$policy":"Lookup","name":"receiver"}},{"$policy":"Receive","channel":{"$policy":"Lookup","name":"me"},"rules":[{"$policy":"Rule","pattern":{"$policy":"AsPattern","term":{"Type":"https://didcomm.org/trust-ping/2.0/ping-response"},"name":"response"},"guard":{"$policy":"Infix","operator":"=","left":{"$policy":"LookupMember","term":{"$policy":"Lookup","name":"response"},"member":"Thid"},"right":{"$policy":"LookupMember","term":{"$policy":"Lookup","name":"message"},"member":"Id"}},"term":{"$policy":"Lookup","name":"response"}}]}]}}},"in":{"$policy":"Let","pattern":{"$policy":"Lookup","name":"respond"},"term":{"$policy":"Fix","term":{"$policy":"Function","pattern":{"$policy":"Lookup","name":"respond"},"term":{"$policy":"Function","pattern":null,"term":{"$policy":"Sequence","terms":[{"$policy":"Receive","channel":"did:example:to","rules":[{"$policy":"Rule","pattern":{"$policy":"AsPattern","term":{"Type":"https://didcomm.org/trust-ping/2.0/ping"},"name":"message"},"term":{"$policy":"If","condition":{"$policy":"LookupMember","term":{"$policy":"LookupMember","term":{"$policy":"Lookup","name":"message"},"member":"Body"},"member":"ResponseRequested"},"then":{"$policy":"Let","pattern":{"$policy":"Lookup","name":"response"},"term":{"Type":"https://didcomm.org/trust-ping/2.0/ping-response","Id":"receive-id","Thid":{"$policy":"LookupMember","term":{"$policy":"Lookup","name":"message"},"member":"Id"}},"in":{"$policy":"Send","message":{"$policy":"Lookup","name":"response"},"channel":{"$policy":"LookupMember","term":{"$policy":"Lookup","name":"message"},"member":"From"}}}}}]},{"$policy":"Parallel","term":{"$policy":"Application","function":{"$policy":"Lookup","name":"respond"},"arg":null}}]}}}},"in":[{"$policy":"Application","function":{"$policy":"Lookup","name":"ping"},"arg":"did:example:to"},{"$policy":"Parallel","term":{"$policy":"Application","function":{"$policy":"Lookup","name":"respond"},"arg":null}}]}}}